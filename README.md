# 🎯 智能考试系统 (CRAC Exam System)

一个功能强大、界面美观的在线考试系统，支持多种答题模式和文件格式导入。

## ✨ 主要特性

### 📚 多种答题模式

- **顺序答题**: 按题目原始顺序进行答题
- **乱序答题**: 随机打乱题目顺序，增加练习难度
- **背题模式**: 学习模式，可随时查看正确答案
- **模拟考试**: 按真实考试标准进行，包含时间限制和评分

### 📄 多格式文件支持

- **PDF文件**: 自动解析PDF中的CRAC格式题目内容
- **Word文档**: 支持.docx格式文档导入，使用CRAC标记
- **Excel文件**: 支持.xlsx格式电子表格导入
- **CSV文件**: 结构化数据导入，支持标准表格格式
- **TXT文本**: 纯文本格式题库，支持多种解析规则
- **拖拽上传**: 支持文件拖拽到页面直接导入

### 🎨 现代化界面设计

- **响应式布局**: 适配各种屏幕尺寸
- **流畅动画**: 丰富的CSS动画和过渡效果
- **直观操作**: 用户友好的交互设计
- **实时反馈**: 即时的操作反馈和状态显示

### 🔧 智能功能

- **自动保存**: 答题进度自动保存到本地
- **智能评分**: 支持单选题、多选题、判断题和填空题的精确评分
- **答题卡**: 可视化答题进度和状态管理，支持题型颜色区分和统计显示
- **时间管理**: 模拟考试模式下的倒计时功能
- **结果分析**: 详细的考试结果和错题分析
- **填空题宽容判断**: 支持多个正确答案和智能标点符号忽略
- **智能查看答案**: 根据题型自动选中正确答案或显示答案区域
- **错题回看**: 自动记录错题，支持错题回顾和重新练习
- **题目收藏**: 收藏重要题目，建立个人题库，实时统计显示
- **选项打乱**: 智能检测答案分布，自动打乱选项顺序提升考试公平性
- **数据导出**: 支持错题、收藏题目和全部数据的导出功能
- **本地存储**: 错题和收藏数据持久化保存到本地
- **数据管理**: 一键清除本地数据功能，支持完全重置系统状态

## 🚀 快速开始

### 环境要求

- 现代浏览器 (Chrome, Firefox, Safari, Edge)
- Python 3.x (用于本地服务器)

### 直接运行

1. **下载本项目**
2. **解压到文件夹**
3. **本地浏览器运行**

- 双击打开index.html，在本地浏览器（推荐chrome、edge）中运行

### 安装运行（⭐️**推荐**）

1. **克隆项目**

   ```bash
   git clone https://github.com/anyiweb/exam_crac.git
   cd exam_crac
   ```
2. **启动本地服务器**

   ```bash
   python -m http.server 8000
   ```
   - 启动成功后，会在终端显示类似 `Serving HTTP on :: port 8000 (http://[::]:8000/) ...` 的消息
   - 确保Python已安装并添加到系统环境变量
   - 确保8000端口未被占用，或根据需要修改端口号
3. **访问系统**

   - 打开浏览器访问: `http://localhost:8000`

## 📖 使用指南

### 1. 导入题库

#### 方式一：文件上传

- 点击"选择文件"按钮
- 选择支持的文件格式 (PDF, DOCX, CSV, TXT, XLSX)
- 系统自动解析并加载题目

#### 方式二：拖拽上传

- 直接将文件拖拽到上传区域
- 系统自动识别文件类型并处理

#### 方式三：使用示例题库

- 点击"加载示例题库"快速体验系统功能

#### 方式四：加载CRAC题库

- 点击"加载CRAC题库"按钮
- 在弹出的选择界面中选择需要的题库文件：
  - **A类683.pdf**: A类考试题库 (683题)
  - **B类1143.pdf**: B类考试题库 (1143题)
  - **C类1282.pdf**: C类考试题库 (1282题)
- 系统自动加载选中的PDF文件并解析题目

### 2. 选择答题模式

导入题库后，选择适合的答题模式：

- **📝 顺序答题**: 适合系统性学习
- **🔀 乱序答题**: 增加练习难度，避免记忆顺序
- **📖 背题模式**: 学习模式，可查看答案加深理解
- **🎯 模拟考试**: 真实考试环境，包含时间限制

### 3. 模拟考试配置

选择模拟考试模式时，可以选择以下考试类型：

- **A类考试**: 40题（32单选+8多选），90分钟，32分合格
- **B类考试**: 60题（45单选+15多选），120分钟，48分合格
- **C类考试**: 90题（70单选+20多选），150分钟，72分合格
- **自定义试卷**: 可自由设置题目数量、考试时间、合格题数和合格率

### 4. 答题操作

- **选择答案**: 点击选项进行选择
- **导航**: 使用"上一题"/"下一题"按钮或答题卡跳转
- **查看答案**: 背题模式下可点击"查看答案"按钮，系统会根据题型智能显示答案
  - 单选题/多选题/判断题：自动选中正确答案并在下方显示
  - 填空题：在下方创建专门的答案显示区域
- **收藏题目**: 点击"⭐ 收藏"按钮将重要题目添加到收藏夹
- **考试控制**: 模拟考试模式下的特殊功能
  - **暂停考试**: 点击"⏸️ 暂停考试"按钮暂停计时和答题
  - **恢复考试**: 点击"▶️ 恢复考试"按钮继续考试，时间会自动扣除暂停时长
  - **智能提醒**: 题库数量不足时会提示用户选择是否继续
  - **选项打乱**: 当检测到90%以上的单选题答案都是同一选项时，自动打乱所有题目的选项顺序，确保答案分布更加均匀
- **重置答题**: 点击"重置答题"清空所有答案
- **提交考试**: 完成答题后点击"提交考试"

### 5. 结果查看

考试结束后可查看：

- **总体得分**: 正确率和具体分数
- **答题统计**: 已答题数、正确题数、错误题数
- **考试用时**: 实际答题时间
- **合格状态**: 是否达到合格标准
- **错题回顾**: 查看具体的错误题目和正确答案
- **错题回看**: 点击"📝 错题回看"按钮进入错题管理界面

### 6. 错题回看与收藏管理

#### 错题回看功能

- **自动记录**: 系统自动记录答错的题目
- **错题列表**: 显示所有错题的详细信息，包括题目内容、用户答案、正确答案
- **来源追踪**: 显示错题来源的题库文件
- **重新练习**: 可以从错题列表中移除已掌握的题目
- **清空错题**: 一键清空所有错题记录

#### 收藏功能

- **收藏题目**: 在答题过程中点击"⭐ 收藏"按钮收藏重要题目
- **收藏列表**: 查看所有收藏的题目
- **统计显示**: 在答题卡和考试结果中实时显示已收藏题目数量
- **实时更新**: 收藏状态变化时，统计数据自动更新
- **取消收藏**: 从收藏列表中移除不需要的题目
- **清空收藏**: 一键清空所有收藏记录

#### 数据持久化

- **本地存储**: 错题和收藏数据自动保存到浏览器本地存储
- **跨会话保持**: 关闭浏览器后重新打开，数据依然保留
- **文件关联**: 错题和收藏与原题库文件关联，便于管理

#### 数据管理

- **一键清除**: 主页面提供"清除本地数据"按钮，可完全重置系统状态
- **安全确认**: 清除操作前会弹出确认对话框，防止误操作
- **全面清理**: 清除所有本地数据，包括错题记录、收藏题目、考试进度和自定义设置
- **智能导航**: 清除后根据当前界面自动跳转到合适的页面

## 🔧 题库格式说明

### CSV格式

```csv
题目,选项A,选项B,选项C,选项D,正确答案,题目类型
"这是一道单选题","选项A","选项B","选项C","选项D","A","单选题"
"这是一道多选题","选项A","选项B","选项C","选项D","AB","多选题"
"这是一道判断题","正确","错误","","","A","判断题"
"这是一道填空题","","","","","答案1|答案2|答案3","填空题"
```

**填空题多答案设置**: 使用 `|` 符号分隔多个正确答案，系统会自动忽略标点符号和多余空格进行宽容匹配。

### TXT格式

```
1. 这是单选题内容？
A. 选项A
B. 选项B  
C. 选项C
D. 选项D
答案：A

2. 这是多选题内容？
A. 选项A
B. 选项B
C. 选项C
D. 选项D
答案：BC

3. 这是判断题内容？
A. 正确
B. 错误
答案：A

4. 这是填空题：CSS的全称是____。
答案：Cascading Style Sheets|层叠样式表
```

**填空题格式说明**:

- 填空题可以不设置选项，直接在题目中使用下划线或其他标记表示填空位置
- 答案部分使用 `|` 分隔多个正确答案
- 系统会自动进行宽容匹配，忽略标点符号和多余空格

### CRAC格式

CRAC格式是系统专用的标记格式，适用于PDF和Word文档：

```
[J] 题目分隔符
[Q] 题目内容
[A] 选项A内容
[B] 选项B内容  
[C] 选项C内容
[D] 选项D内容
[T] 正确答案
```

**CRAC格式特点**:

- 使用标准化标记符号，便于自动解析
- 支持单选题、多选题、判断题和填空题
- 适合从PDF和Word文档中提取题目
- 可自定义标记符号以适应不同格式

### Excel格式 (.xlsx)

支持Excel文件导入，格式与CSV相同：

- 第一行为标题行
- 后续行为题目数据
- 自动转换为CSV格式进行解析

### Word格式 (.docx)

支持Word文档导入，需要使用CRAC格式标记：

- 文档中使用CRAC标记符号
- 自动提取文本内容进行解析
- 保持原有格式和结构

### PDF格式

支持PDF文件导入，需要使用CRAC格式标记：

- 自动提取PDF文本内容
- 按行解析题目结构
- 支持多页PDF文档

### 自定义解析规则

系统支持自定义CRAC解析规则，可在设置中配置：

- **题目标记**: 默认为[Q]
- **选项标记**: 默认为[A-F]
- **答案标记**: 默认为[T]
- **题目分隔符**: 默认为[J]

## 🎨 界面特性

### 动画效果

- **页面加载**: 渐入动画和滑动效果
- **卡片交互**: 悬停和点击的缩放动画
- **按钮反馈**: 光泽扫过和弹跳效果
- **状态变化**: 平滑的颜色和位置过渡

### 响应式设计

- **桌面端**: 完整功能和最佳体验
- **平板端**: 适配中等屏幕尺寸
- **移动端**: 优化触摸操作体验

### 主题色彩

- **主色调**: 蓝紫渐变 (#667eea → #764ba2)
- **成功色**: 绿色 (#28a745)
- **警告色**: 橙色 (#ff9800)
- **危险色**: 红色 (#ff6b6b)
- **信息色**: 蓝色 (#007bff)

## 🔒 数据安全

- **本地存储**: 所有数据存储在浏览器本地，不上传到服务器
- **隐私保护**: 不收集任何个人信息
- **离线使用**: 导入题库后可离线使用
- **数据清理**: 提供一键清除本地数据功能，包括错题记录、收藏题目、考试进度和自定义设置
- **安全确认**: 清除数据前会进行安全确认，防止误操作

## 🛠️ 技术栈

### 前端技术

- **HTML5**: 语义化标记和现代特性
- **CSS3**: 变量、动画、网格布局
- **JavaScript ES6+**: 模块化和异步编程
- **Web APIs**: File API, LocalStorage, PDF.js

### 核心库

- **PDF.js**: PDF文件解析和文本提取
- **mammoth.js**: Word文档(.docx)解析
- **XLSX.js**: Excel文件(.xlsx)解析
- **原生JavaScript**: 无外部框架依赖，轻量级实现

### 开发工具

- **Python HTTP Server**: 本地开发服务器
- **现代浏览器**: 开发和调试工具

## 📁 项目结构

```
exam_crac/
├── index.html          # 主页面文件
├── script.js           # 核心JavaScript逻辑
├── styles.css          # 样式表和动画
├── favicon.ico         # 网站图标
├── README.md           # 项目说明文档
├── crac/               # CRAC格式题库文件夹
│   ├── A类683.pdf      # A类考试题库(683题)
│   ├── B类1143.pdf     # B类考试题库(1143题)
│   └── C类1282.pdf     # C类考试题库(1282题)
└── example/            # 示例题库文件夹
    ├── 示例题库.csv    # CSV格式示例
    ├── 示例题库.docx   # Word格式示例
    ├── 示例题库.txt    # TXT格式示例
    └── 示例题库.xlsx   # Excel格式示例
```

## 🔄 更新日志

### v2.8.0 (最新版本)

- 📚 新增CRAC题库加载功能，支持快速选择预设题库文件
- 🎯 添加专用的"加载CRAC题库"按钮，提供A类、B类、C类题库选择
- 🎨 实现美观的题库选择模态框，支持文件预览和描述
- 🔧 优化题库加载流程，自动切换到CRAC模式并处理PDF文件
- 📝 完善错题记录逻辑，确保未回答题目也能正确记录为错题

### v2.7.0

- ⭐ 完善收藏功能，在统计信息中新增"已收藏"题目数量显示
- 📊 优化答题卡界面，实时显示收藏题目统计
- 🎨 改进用户体验，收藏状态变化时实时更新统计数据
- 📝 更新文档说明，完善收藏功能介绍

### v2.6.0

- 🔀 新增智能选项打乱功能，检测单选题答案分布异常时自动打乱选项顺序
- 🎯 防止题库答案过于集中在某个选项，提升考试公平性
- 🧠 智能检测算法，当90%以上单选题答案为同一选项时触发打乱
- 📊 支持单选题、多选题、判断题的选项重排，保持答案准确性
- 🔧 优化答题体验，确保考试更具挑战性

### v2.5.0

- ⏸️ 新增模拟考试暂停和恢复功能，支持考试过程中的灵活控制
- 🛡️ 暂停期间自动禁用答题功能，确保考试公平性
- ⏰ 智能时间管理，暂停时间不计入考试用时
- 🔍 题库数量检查优化，不足时提供用户确认选择
- 🎯 改进考试流程控制，提升用户体验

### v2.4.0

- 🗑️ 新增一键清除本地数据功能，支持完全重置系统状态
- 🔒 添加数据清除安全确认机制，防止误操作
- ⏰ 修复模拟考试模式下剩余时间显示叠加的bug
- 🎨 优化自定义试卷选项的视觉状态显示
- 🧹 完善数据管理功能，包括错题记录、收藏题目、考试进度和自定义设置的清理

### v2.3.0

- ⭐ 新增题目收藏功能，支持收藏重要题目建立个人题库
- 📝 新增错题回看功能，自动记录错题并支持错题管理
- 💾 实现本地数据持久化，错题和收藏数据跨会话保持
- 🏠 新增主页面导航，提供题库管理入口
- 🎨 优化界面布局，增加错题和收藏管理界面

### v2.2.0

- 🎯 新增自定义试卷功能，支持自由设置题目数量、考试时间和合格标准
- ⚙️ 优化模拟考试配置界面，提供更灵活的考试设置选项
- 🔧 完善考试参数验证，确保配置的合理性

### v2.1.0

- 🎨 新增答题卡题型颜色区分功能
- 🧠 实现填空题宽容判断机制，支持多答案和标点符号忽略
- 👁️ 优化查看答案功能，根据题型智能显示答案
- ✨ 改进用户体验和视觉反馈

### v2.0.0

- ✨ 新增多种答题模式选择
- 🎨 全新的动画效果和界面美化
- 🔧 优化文件解析性能
- 📱 改进移动端适配
- 🐛 修复已知问题

### v1.5.0

- 📄 支持PDF和Word文档导入
- ⏱️ 添加模拟考试计时功能
- 💾 实现答题进度自动保存
- 🎯 优化答题卡交互体验

### v1.0.0

- 🎉 初始版本发布
- 📝 基础答题功能
- 📊 简单的结果统计
- 🔧 CSV和TXT格式支持

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进项目！

### 开发环境设置

1. Fork项目到你的GitHub账户
2. 克隆到本地进行开发
3. 创建新的功能分支
4. 提交你的更改
5. 发起Pull Request

### 代码规范

- 使用ES6+语法
- 保持代码注释的完整性
- 遵循现有的代码风格
- 确保新功能有适当的错误处理

## 📞 支持与反馈

如果你在使用过程中遇到问题或有改进建议，请：

1. 查看本README文档
2. 检查已有的Issues
3. 创建新的Issue描述问题
4. 提供详细的复现步骤

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🙏 致谢

感谢所有为这个项目做出贡献的开发者和用户！

---

**享受你的学习和考试体验！** 🎓✨
